import{d as ne,m as X,o as se,J as ie,c as x,e as a,b as y,f as w,I as C,F as Y,i as q,j as re,w as ue,T as ce,K as he,k as L,a as f,D as _,t as P,y as k,z,n as G,h as de,l as U,_ as ve}from"./index-gmKKGf-4.js";const ge={class:"relative h-[45vh] min-h-[320px] flex items-center justify-center overflow-hidden"},fe={class:"relative text-center text-white z-10"},me={class:"relative inline-flex justify-center mt-4 group/tip"},be={class:"w-9 h-9 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center cursor-pointer transition-all duration-300 hover:bg-white/40 hover:scale-110"},pe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},xe={class:"pool-wrapper"},ye=["src"],we=["onPointerdown"],_e=["src","alt"],ke={class:"float-photo-label"},ze={class:"lightbox-container"},Me={class:"lightbox-main"},Ae=["src","alt"],Ie={class:"lightbox-info"},Ce={class:"text-white font-medium text-sm"},Le={class:"text-white/60 text-xs"},Pe={class:"lightbox-thumbnails"},je=["onClick"],Se=["src","alt"],i=4,$e=ne({__name:"Memory",setup(Re){const V=X("/img/xiangkuang.png");function v(e,o,s){return s.map(n=>({src:X(`/img/album/${e}/${n}.jpg`),thumb:X(`/img/album/${e}/thumb/${n}.jpg`),title:`${o} ${n}`}))}const B=[{name:"xiamen",label:"Xiamen",photos:v("xiamen","Xiamen",[1,2,3,4,5,6])},{name:"wuhan",label:"Wuhan",photos:v("wuhan","Wuhan",[7,8,9,10,11,12,13,14,15,16])},{name:"xian",label:"Xi'an",photos:v("xi'an","Xi'an",[17,18,19,20,21,22,23,24,25])},{name:"nanjing",label:"Nanjing",photos:v("nanjing","Nanjing",[26,27,28,29,30,31,32,33])},{name:"hangzhou",label:"Hangzhou",photos:v("hangzhou","Hangzhou",Array.from({length:19},(e,o)=>o+34))},{name:"suzhou",label:"Suzhou",photos:v("suzhou","Suzhou",Array.from({length:10},(e,o)=>o+53))},{name:"shenzhen",label:"Shenzhen",photos:v("shenzhen","Shenzhen",Array.from({length:10},(e,o)=>o+63))},{name:"soulpower2",label:"Soul Power II",photos:v("soulpowerⅡ","Soul Power II",Array.from({length:8},(e,o)=>o+73))}],M=[];B.forEach((e,o)=>{const s=Math.min(3,e.photos.length),n=Array.from({length:e.photos.length},(l,t)=>t);for(let l=n.length-1;l>0;l--){const t=Math.floor(Math.random()*(l+1));[n[l],n[t]]=[n[t],n[l]]}for(let l=0;l<s;l++){const t=n[l];M.push({image:e.photos[t].thumb,title:e.label,albumIdx:o,photoIdx:t})}});const m=L(null),c=[];let g=-1,j=0,F=0,T=0,S=!1;function d(e,o){return e+Math.random()*(o-e)}const b=[];function K(e,o){e&&(b[o]=e)}function J(){var s,n;const e=((s=m.value)==null?void 0:s.clientWidth)??800,o=((n=m.value)==null?void 0:n.clientHeight)??600;c.length=0;for(let l=0;l<M.length;l++){const t=Math.round(d(110,150)),ae={x:d(i,e-t-i),y:d(i,o-t-i),vx:d(-.4,.4),vy:d(-.3,.3),rot:d(-15,15),vr:d(-.06,.06),w:t,h:t,grabbed:!1,el:b[l]||null};c.push(ae);const R=b[l];R&&(R.style.width=t+"px",R.style.height=t+"px")}Z()}function A(e){e.el&&(e.el.style.transform=`translate3d(${e.x}px,${e.y}px,0) rotate(${e.rot}deg)`)}function Z(){for(let e=0;e<c.length;e++)c[e].el=b[e]||null,A(c[e])}function D(){var s,n;const e=((s=m.value)==null?void 0:s.clientWidth)??800,o=((n=m.value)==null?void 0:n.clientHeight)??600;for(let l=0;l<c.length;l++){const t=c[l];t.grabbed||(t.x+=t.vx,t.y+=t.vy,t.rot+=t.vr,t.x<i&&(t.x=i,t.vx=Math.abs(t.vx)),t.x>e-t.w-i&&(t.x=e-t.w-i,t.vx=-Math.abs(t.vx)),t.y<i&&(t.y=i,t.vy=Math.abs(t.vy)),t.y>o-t.h-i&&(t.y=o-t.h-i,t.vy=-Math.abs(t.vy)),A(t))}j=requestAnimationFrame(D)}function O(e,o){g=e,c[e].grabbed=!0,F=o.clientX,T=o.clientY,S=!1;const s=b[e];s&&(s.classList.add("is-grabbed"),s.style.zIndex="30")}function E(){if(g>=0){S||ee(g);const e=c[g];e.grabbed=!1,e.vx=d(-.35,.35),e.vy=d(-.25,.25);const o=b[g];o&&(o.classList.remove("is-grabbed"),o.style.zIndex=""),A(e)}g=-1}function Q(e){var t;if(g<0)return;const o=e.clientX-F,s=e.clientY-T;(Math.abs(o)>5||Math.abs(s)>5)&&(S=!0);const n=(t=m.value)==null?void 0:t.getBoundingClientRect();if(!n)return;const l=c[g];l.x=e.clientX-n.left-l.w/2,l.y=e.clientY-n.top-l.h/2,l.rot=0,A(l)}const p=L(null),h=L(0),r=U(()=>p.value!==null?B[p.value]:null),I=U(()=>r.value?r.value.photos[h.value]:null);function ee(e){const o=M[e];u.value=!1,p.value=o.albumIdx,h.value=o.photoIdx}function $(){p.value=null,h.value=0}function N(){r.value&&(u.value=!1,h.value=(h.value-1+r.value.photos.length)%r.value.photos.length)}function H(){r.value&&(u.value=!1,h.value=(h.value+1)%r.value.photos.length)}function te(e){u.value=!1,h.value=e}const u=L(!1);function oe(){u.value=!0}function W(e){p.value!==null&&(e.key==="ArrowLeft"?N():e.key==="ArrowRight"?H():e.key==="Escape"&&$())}function le(){J(),j=requestAnimationFrame(D)}return se(()=>{document.addEventListener("keydown",W)}),ie(()=>{cancelAnimationFrame(j),document.removeEventListener("keydown",W)}),(e,o)=>(f(),x("div",null,[a("header",ge,[o[3]||(o[3]=a("div",{class:"absolute inset-0 bg-black/40"},null,-1)),a("div",fe,[y(w(C),{icon:"lucide:images",class:"w-16 h-16 mx-auto mb-4 drop-shadow-lg"}),o[1]||(o[1]=a("h1",{class:"text-4xl md:text-5xl font-bold drop-shadow-lg"},"Gallery",-1)),o[2]||(o[2]=a("p",{class:"mt-3 text-white/80 text-lg"},"Time machine, capturing beautiful moments",-1)),a("div",me,[a("div",be,[y(w(C),{icon:"lucide:quote",class:"w-4 h-4 text-white"})]),o[0]||(o[0]=a("div",{class:"absolute top-12 left-1/2 -translate-x-1/2 w-[400px] max-w-[95vw] px-6 py-3 rounded-xl bg-white/60 dark:bg-gray-800/60 backdrop-blur-md border border-white/25 dark:border-gray-700/20 shadow-lg opacity-0 invisible group-hover/tip:opacity-100 group-hover/tip:visible translate-y-2 group-hover/tip:translate-y-0 transition-all duration-300 z-20 pointer-events-none"},[a("div",{class:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 rotate-45 bg-white/60 dark:bg-gray-800/60 border-l border-t border-white/25 dark:border-gray-700/20"}),a("p",{class:"text-sm text-gray-600 dark:text-gray-300 text-center leading-relaxed relative z-10"}," Click a photo to browse the full album of the same collection. ")],-1))])]),o[4]||(o[4]=a("div",{class:"wave-divider"},[a("svg",{viewBox:"0 0 1440 100",preserveAspectRatio:"none"},[a("path",{d:"M0,50 C150,100 350,0 600,50 C850,100 1050,0 1200,50 C1350,100 1440,50 1440,50 L1440,100 L0,100 Z",fill:"rgba(255,255,255,0.1)"})])],-1))]),a("div",pe,[a("div",xe,[a("img",{src:w(V),alt:"",class:"pool-frame-img",draggable:"false",onLoad:le},null,40,ye),a("div",{ref_key:"poolRef",ref:m,class:"photo-pool",onPointermove:Q,onPointerup:E,onPointerleave:E},[(f(),x(Y,null,q(M,(s,n)=>a("div",{key:n,ref_for:!0,ref:l=>K(l,n),class:"float-photo",onPointerdown:_(l=>O(n,l),["prevent"])},[a("img",{src:s.image,alt:s.title,class:"float-photo-img",draggable:"false"},null,8,_e),a("div",ke,P(s.title),1)],40,we)),64))],544)])]),(f(),re(he,{to:"body"},[y(ce,{name:"lb"},{default:ue(()=>[p.value!==null&&r.value&&I.value?(f(),x("div",{key:0,class:"lightbox-overlay",onClick:_($,["self"])},[k(a("button",{class:"lightbox-nav lightbox-nav-left",onClick:_(N,["stop"])},[y(w(C),{icon:"lucide:chevron-left",class:"w-6 h-6"})],512),[[z,u.value]]),k(a("button",{class:"lightbox-nav lightbox-nav-right",onClick:_(H,["stop"])},[y(w(C),{icon:"lucide:chevron-right",class:"w-6 h-6"})],512),[[z,u.value]]),a("div",ze,[a("div",Me,[(f(),x("img",{src:I.value.src,alt:I.value.title,class:G(["lightbox-img",{"is-loaded":u.value}]),key:I.value.src,onLoad:oe},null,42,Ae)),k(a("button",{class:"lightbox-close",onClick:$},"×",512),[[z,u.value]]),k(a("div",Ie,[a("span",Ce,P(r.value.label),1),a("span",Le,P(h.value+1)+" / "+P(r.value.photos.length),1)],512),[[z,u.value]])]),k(a("div",Pe,[(f(!0),x(Y,null,q(r.value.photos,(s,n)=>(f(),x("button",{key:n,onClick:_(l=>te(n),["stop"]),class:G(["thumb-item",{active:n===h.value}])},[a("img",{src:s.thumb,alt:s.title,class:"thumb-img"},null,8,Se)],10,je))),128))],512),[[z,u.value]])])])):de("",!0)]),_:1})]))]))}}),Be=ve($e,[["__scopeId","data-v-e28eb933"]]);export{Be as default};
